---
- name: Enable epel repo
  yum:
    name: epel-release

- name: Install default packages
  yum:
    name: "{{ packages }}"
  vars:
    packages:
    - joe
    - vim
    - emacs
    - nano
    - wget
    - git
    - zip
    - unzip
    - lsof
    - telnet
    - strace
    - vim-enhanced
    - tcpdump
    - nc
    - screen
    - htop
    - iotop
    - sl
    - bind-utils
    - pv
    - dos2unix
    - sysstat
    - psmisc
    - yum-utils
    - jq
    - ncdu
    - bash-completion
    - tar
    #- python-httplib2
    #- yum-plugin-priorities
    #- bridge-utils
    #- iperf
    #- moreutils

- name: upgrade python-pip
  pip:
    executable: pip3
    name:
      - pip
      - setuptools
    extra_args: --upgrade

- name: download bat
  unarchive:
    src: https://github.com/sharkdp/bat/releases/download/v0.15.0/bat-v0.15.0-x86_64-unknown-linux-musl.tar.gz
    remote_src: yes
    dest: /tmp

- name: install bat
  command: mv /tmp/bat-v0.15.0-x86_64-unknown-linux-musl/bat /usr/local/bin/bat
  args:
    creates: /usr/local/bin/bat

- name: set bat file permissions
  file:
    name: /usr/local/bin/bat
    mode: 0755

- name: default shasum to sha256sum
  file:
    state: link
    src: /usr/bin/sha256sum
    dest: /usr/bin/shasum